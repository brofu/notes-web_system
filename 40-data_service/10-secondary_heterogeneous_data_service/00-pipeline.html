
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Pipeline Â· Brofu's Talk</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-disqus/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../../50-middleware/readme.html" />
    
    
    <link rel="prev" href="readme.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../10-front_end/readme.html">
            
                <a href="../../10-front_end/readme.html">
            
                    
                    Front End
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../20-access_layer/readme.html">
            
                <a href="../../20-access_layer/readme.html">
            
                    
                    Access Layer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../30-business_service/readme.html">
            
                <a href="../../30-business_service/readme.html">
            
                    
                    Business Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../readme.html">
            
                <a href="../readme.html">
            
                    
                    Data Service
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="readme.html">
            
                <a href="readme.html">
            
                    
                    Secondary Heterogeneous Data Service
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.5.1.1" data-path="00-pipeline.html">
            
                <a href="00-pipeline.html">
            
                    
                    Pipeline
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../../50-middleware/readme.html">
            
                <a href="../../50-middleware/readme.html">
            
                    
                    Middleware
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../../50-middleware/10-rpc/readme.html">
            
                <a href="../../50-middleware/10-rpc/readme.html">
            
                    
                    Rpc
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1.1" data-path="../../50-middleware/10-rpc/01-design/readme.html">
            
                <a href="../../50-middleware/10-rpc/01-design/readme.html">
            
                    
                    Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.2" data-path="../../50-middleware/10-rpc/02-gRPC/readme.html">
            
                <a href="../../50-middleware/10-rpc/02-gRPC/readme.html">
            
                    
                    G RPC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.3" data-path="../../50-middleware/10-rpc/03-a_demo/readme.html">
            
                <a href="../../50-middleware/10-rpc/03-a_demo/readme.html">
            
                    
                    A Demo
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1.3.1" data-path="../../50-middleware/10-rpc/03-a_demo/class_diagram.html">
            
                <a href="../../50-middleware/10-rpc/03-a_demo/class_diagram.html">
            
                    
                    Class Diagram
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../../60-database/">
            
                <a href="../../60-database/">
            
                    
                    Database
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../../60-database/00-database_engine_architecture/readme.html">
            
                <a href="../../60-database/00-database_engine_architecture/readme.html">
            
                    
                    Database Engine Architecture
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../../60-database/10-MySQL/readme.html">
            
                <a href="../../60-database/10-MySQL/readme.html">
            
                    
                    MySQL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../../60-database/20-ElasticSearch/readme.html">
            
                <a href="../../60-database/20-ElasticSearch/readme.html">
            
                    
                    ElasticSearch
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../../60-database/40-ClickHouse/readme.html">
            
                <a href="../../60-database/40-ClickHouse/readme.html">
            
                    
                    ClickHouse
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.4.1" data-path="../../60-database/40-ClickHouse/01-Summary/readme.html">
            
                <a href="../../60-database/40-ClickHouse/01-Summary/readme.html">
            
                    
                    Summary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.2" data-path="../../60-database/40-ClickHouse/02-Architecture/readme.html">
            
                <a href="../../60-database/40-ClickHouse/02-Architecture/readme.html">
            
                    
                    Architecture
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.3" data-path="../../60-database/40-ClickHouse/03-SourceCode/readme.html">
            
                <a href="../../60-database/40-ClickHouse/03-SourceCode/readme.html">
            
                    
                    Source Code
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.4" data-path="../../60-database/40-ClickHouse/04-Optimization/readme.html">
            
                <a href="../../60-database/40-ClickHouse/04-Optimization/readme.html">
            
                    
                    Optimization
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.4.4.1" data-path="../../60-database/40-ClickHouse/04-Optimization/04-query_optimization/readme.html">
            
                <a href="../../60-database/40-ClickHouse/04-Optimization/04-query_optimization/readme.html">
            
                    
                    Query Optimization
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../../61-message_queue/readme.html">
            
                <a href="../../61-message_queue/readme.html">
            
                    
                    Message Queue
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../../61-message_queue/10-kafka/readme.html">
            
                <a href="../../61-message_queue/10-kafka/readme.html">
            
                    
                    Kafka
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1.1" data-path="../../61-message_queue/10-kafka/10-usage/readme.html">
            
                <a href="../../61-message_queue/10-kafka/10-usage/readme.html">
            
                    
                    Usage
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1.1.1" data-path="../../61-message_queue/10-kafka/10-usage/01-broker/readme.html">
            
                <a href="../../61-message_queue/10-kafka/10-usage/01-broker/readme.html">
            
                    
                    Broker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.1.2" >
            
                <span>
            
                    
                    Consumer
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1.1.2.1" data-path="../../61-message_queue/10-kafka/10-usage/02-consumer/02-consumer_group.html">
            
                <a href="../../61-message_queue/10-kafka/10-usage/02-consumer/02-consumer_group.html">
            
                    
                    Consumer Group
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.1.1.3" data-path="../../61-message_queue/10-kafka/10-usage/03-producer/readme.html">
            
                <a href="../../61-message_queue/10-kafka/10-usage/03-producer/readme.html">
            
                    
                    Producer
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1.1.3.1" data-path="../../61-message_queue/10-kafka/10-usage/03-producer/01-behavior_description.html">
            
                <a href="../../61-message_queue/10-kafka/10-usage/03-producer/01-behavior_description.html">
            
                    
                    Behavior Description
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.1.2" data-path="../../61-message_queue/10-kafka/20-principles/readme.html">
            
                <a href="../../61-message_queue/10-kafka/20-principles/readme.html">
            
                    
                    Principles
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1.2.1" data-path="../../61-message_queue/10-kafka/20-principles/02-broker/readme.html">
            
                <a href="../../61-message_queue/10-kafka/20-principles/02-broker/readme.html">
            
                    
                    Broker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.2.2" data-path="../../61-message_queue/10-kafka/20-principles/03-consumer/readme.html">
            
                <a href="../../61-message_queue/10-kafka/20-principles/03-consumer/readme.html">
            
                    
                    Consumer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.2.3" data-path="../../61-message_queue/10-kafka/20-principles/03-producer/readme.html">
            
                <a href="../../61-message_queue/10-kafka/20-principles/03-producer/readme.html">
            
                    
                    Producer
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../../62-cache/readme.html">
            
                <a href="../../62-cache/readme.html">
            
                    
                    Cache
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../../70-observability/readme.html">
            
                <a href="../../70-observability/readme.html">
            
                    
                    Observability
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../../80-elastic_application/readme.html">
            
                <a href="../../80-elastic_application/readme.html">
            
                    
                    Elastic Application
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Pipeline</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="pipelines">Pipelines</h1>
<p>In this poster, let&apos;s talk about the <code>pipeline</code> part in the solution (shown as <strong>Picture 1</strong>). The term <code>pipeline</code> have same meaning (and usage scenario) as the <code>pipeline</code> with the context of <strong>Linux Shell</strong>. Actually, the ideas are same, consider data like water flow the pipelines. </p>
<p>Back to the data service. There are many possible solutions for the data pipeline. But usually, there are some same patterns behind them,</p>
<ul>
<li>The data are proceed asynchronously. </li>
<li>The data is usually generated/converted from the <strong>data modification event</strong> from the main data store. </li>
<li>There is usually some business logic to handle the data before writing it to the secondary storage.</li>
</ul>
<p></p><p style="text-align: center;"><b>Picture 1. Pipeline Flow</b></p>
<img src="../images/10/pipeline.png" alt="Secondary Heterogeneous Data Service - Pipeline"><p></p>
<h3 id="solution-one-business-logic--queue">Solution One: Business Logic + Queue</h3>
<p>In this solution, <code>Message Queue</code> component is used to connect the data flows, for example, <code>Kafka</code> is a good choice for many scenarios.</p>
<ul>
<li><p>The <code>Business Logic</code> works as the producer to the Kafka. It mainly works on:</p>
<ul>
<li>Catch the main data storage update event, and process the data with dedicated business logic.</li>
<li>Produce the messages to kafka, with pre-defined protocol. </li>
</ul>
</li>
<li><p>The <code>Writer</code> works at the consumer to the kafka. </p>
<ul>
<li>It consumes data from Kafka, and</li>
<li>Write the data to ElasticSearch.</li>
</ul>
</li>
</ul>
<p></p><p style="text-align: center;"><b>Picture 2. Business Loigc &amp; Queue Solution</b></p>
<img src="../images/10/pipeline-solution-1.png" alt="Secondary Heterogeneous Data Service - Pipeline"><p></p>
<h5 id="business-logic">Business Logic</h5>
<p>There are several key problems to consider about the business logic. </p>
<ol>
<li><p>How to catch the main data store update event? </p>
<p>Usually, the Business Logic does not NOT catch the update event directly. Instead, there may be anther abstracted layer, which would listen the main data store update, and populate the event somewhere, for example, Kafka. So that, the Business Logic can just work as a Kafka consumer. Benefits are:</p>
<ul>
<li>Decouple the main data store part and the Business Logic</li>
<li>Reduce the complexity of Business Logic</li>
</ul>
<p>We would talk about this layer later (marked as TBA for now)</p>
</li>
<li>How to make sure there is no data lost during consuming data from the data update event queue? </li>
<li>How to make sure there is no data lost when producing messages to downstream kafka</li>
<li>How to define the <code>data protocol</code> between the producer (the Business Logic) and consumer (the Writer)</li>
</ol>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="readme.html" class="navigation navigation-prev " aria-label="Previous page: Secondary Heterogeneous Data Service">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../../50-middleware/readme.html" class="navigation navigation-next " aria-label="Next page: Middleware">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Pipeline","level":"1.5.1.1","depth":3,"next":{"title":"Middleware","level":"1.6","depth":1,"path":"50-middleware/readme.md","ref":"50-middleware/readme.md","articles":[{"title":"Rpc","level":"1.6.1","depth":2,"path":"50-middleware/10-rpc/readme.md","ref":"50-middleware/10-rpc/readme.md","articles":[{"title":"Design","level":"1.6.1.1","depth":3,"path":"50-middleware/10-rpc/01-design/readme.md","ref":"50-middleware/10-rpc/01-design/readme.md","articles":[]},{"title":"G RPC","level":"1.6.1.2","depth":3,"path":"50-middleware/10-rpc/02-gRPC/readme.md","ref":"50-middleware/10-rpc/02-gRPC/readme.md","articles":[]},{"title":"A Demo","level":"1.6.1.3","depth":3,"path":"50-middleware/10-rpc/03-a_demo/readme.md","ref":"50-middleware/10-rpc/03-a_demo/readme.md","articles":[{"title":"Class Diagram","level":"1.6.1.3.1","depth":4,"path":"50-middleware/10-rpc/03-a_demo/class_diagram.md","ref":"50-middleware/10-rpc/03-a_demo/class_diagram.md","articles":[]}]}]}]},"previous":{"title":"Secondary Heterogeneous Data Service","level":"1.5.1","depth":2,"path":"40-data_service/10-secondary_heterogeneous_data_service/readme.md","ref":"40-data_service/10-secondary_heterogeneous_data_service/readme.md","articles":[{"title":"Pipeline","level":"1.5.1.1","depth":3,"path":"40-data_service/10-secondary_heterogeneous_data_service/00-pipeline.md","ref":"40-data_service/10-secondary_heterogeneous_data_service/00-pipeline.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["plantuml-cloud","disqus"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"plantuml-cloud":{"umlPath":"images/uml","protocol":"http","type":"plantuml-server","host":"www.plantuml.com","port":"80","path":"/plantuml/svg"},"disqus":{"useIdentifier":false,"shortName":"brofu-tech"},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"sortedBy":"-","variables":{},"title":"Brofu's Talk","gitbook":"*","unchanged":["MySQL","ClickHouse","ElasticSearch","Test"]},"file":{"path":"40-data_service/10-secondary_heterogeneous_data_service/00-pipeline.md","mtime":"2023-12-26T10:14:04.701Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2023-12-26T10:14:45.382Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.16.1/URI.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-disqus/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

